# HTTP 代理端口
port: 7890

# SOCKS5 代理端口
socks-port: 7891

# Linux 和 macOS 的 redir 代理端口 (如需使用此功能，请取消注释)
# redir-port: 7892

# 允许局域网的连接（可用来共享代理）
allow-lan: true

# 规则模式：Rule（规则） / Global（全局代理）/ Direct（全局直连）
mode: Rule

# 设置日志输出级别 (默认级别：silent，即不输出任何内容，以避免因日志内容过大而导致程序内存溢出）。
# 5 个级别：silent / info / warning / error / debug。级别越高日志输出量越大，越倾向于调试，若需要请自行开启。
log-level: info

# clash 的 RESTful API
external-controller: 127.0.0.1:9090


# DNS 设置
dns:
  enable: true
  listen: 0.0.0.0:7874
  ipv6: true
  enhanced-mode: redir-host
  nameserver:
   - https://223.5.5.5/dns-query#h3=true
   - https://doh.pub/dns-query#h3=true
   - https://dns.alidns.com/dns-query#h3=true
  fallback:
   - https://1.1.1.1/dns-query
   - https://8.8.8.8/dns-query
   - https://public.dns.iij.jp/dns-query
  default-nameserver:
   - https://223.5.5.5/dns-query#h3=true
   - https://1.1.1.1/dns-query
   - https://8.8.8.8/dns-query
  proxy-server-nameserver:
   - https://223.5.5.5/dns-query#h3=true
   - https://doh.pub/dns-query#h3=true
   - https://dns.alidns.com/dns-query#h3=true
   - https://1.1.1.1/dns-query
   - https://8.8.8.8/dns-query
   - https://public.dns.iij.jp/dns-query

# fallback-filter
fallback-filter:
  geoip: true
  geoip-code: CN
  geosite:
   - gfw
  - "!cn"
  ipcidr:
    - 0.0.0.0/8
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 192.0.2.0/24
    - 192.88.99.0/24
    - 192.168.0.0/16
    - 198.18.0.0/15
    - 198.51.100.0/24
    - 203.0.113.0/24
    - 224.0.0.0/4
    - 240.0.0.0/4
    - 255.255.255.255/32
    domain:
    - "+.google.com"
    - "+.facebook.com"
    - "+.youtube.com"
    - "+.githubusercontent.com"
    - "+.googlevideo.com"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
  nameserver-policy:
    geosite:cn,private,apple:
    - https://223.5.5.5/dns-query
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    geosite:geolocation-!cn:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    - https://public.dns.iij.jp/dns-query
    geosite:category-ads-all: rcode://success
